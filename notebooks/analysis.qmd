---
title: "Depression among patients living with diabetes - Analysis"
author: "Eric Anku"
format: html
---

```{r import-libraries}
pacman::p_load(
  tidyverse, # Data manipulation and visualisation
  gtsummary, # Summary and regression tables
  finalfit, # Modelling
  rio, # Import data
  here, # File management
  skimr # Skim dataset
)
```

```{r import-dataset}
# Import datasets
df <- import(here("data", "clean_data.RData")) # Full dataset
demographics <- import(here("data", "demos.RData")) # Demographics subset
depress <- import(here("data", "depression.RData")) # Depression subset
family_func <- import(here("data", "family.RData")) # Family functionality
health <- import(here("data", "health.RData")) # Health characteristics 
```

```{r skim-data}
skim(df)
```

```{r shapiro-wilk-test}
# Create function
shapiro_test <- function(x) {
  shapiro_resut <- shapiro.test(x)
  return(shapiro_resut$p.value)
}

# Extract numeric variables
numeric_vars <- df |>
  select_if(is.numeric)

# Apply function to numeric variables
shapiro_p_values <- numeric_vars |>
  summarise(across(everything(), ~ shapiro_test(.))) |>
  pivot_longer(everything(), names_to = "Variable", values_to = "P values")

# Print shapiro_result
print(shapiro_p_values)
```

